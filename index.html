<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StorageTag: Smart Storage Scanner</title>
    <meta name="theme-color" content="#2E7D32">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <h1>StorageTag: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Å—Ç–∞–º–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è</h1>

    <!-- –°–µ–∫—Ü–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <section id="scan-section">
        <h2>–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ç—Ä–∏—Ö-–∫–æ–¥–∞</h2>
        <button id="toggle-scan">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫–∞–Ω–µ—Ä</button>
        <video
            id="camera-preview"
            class="hidden"
            autoplay
            playsinline
            muted
        ></video>
    </section>

    <!-- –°–µ–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ -->
    <section>
        <h2>–ü–æ–∏—Å–∫ –ø—Ä–µ–¥–º–µ—Ç–∞</h2>
        <input type="text" id="search-input" placeholder="–ß—Ç–æ –≤—ã –∏—â–µ—Ç–µ?">
        <div class="controls">
            <button id="text-search">–ù–∞–π—Ç–∏ –ø–æ —Ç–µ–∫—Å—Ç—É</button>
            <button id="voice-search">
                –ì–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–∏—Å–∫
                <span class="voice-indicator" id="voice-indicator"></span>
            </button>
        </div>
        <div id="search-results"></div>
    </section>

    <!-- –°–µ–∫—Ü–∏—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ -->
    <section>
        <h2>–†—É—á–Ω–æ–π –≤–≤–æ–¥ –Ω–æ–º–µ—Ä–∞</h2>
        <input type="text" id="shelf-id-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –ø–æ–ª–∫–∏">
        <button id="manual-search">–ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ</button>
    </section>

    <!-- –°–µ–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö -->
    <section id="item-section" class="hidden">
        <h2>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ–ª–∫–∏</h2>
        <div class="item-card">
            <p><strong>–ù–æ–º–µ—Ä:</strong> <span id="item-id"></span></p>
            <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> <span id="item-title"></span></p>
            <p><strong>–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏:</strong> <span id="item-description"></span></p>
            <p><strong>–û–±–Ω–æ–≤–ª–µ–Ω–æ:</strong> <span id="item-updated"></span></p>
        </div>

        <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</h3>
        <div style="display: flex;">
            <button id="voice-input-title">
                üéôÔ∏è
                <span class="voice-indicator" id="voice-indicator-title"></span>
            </button>
            <input type="text" id="edit-title" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ">
        </div>
        <div style="display: flex;">
            <button id="voice-input-description">
                üéôÔ∏è
                <span class="voice-indicator" id="voice-indicator-description"></span>
            </button>
            <textarea id="edit-description" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"></textarea>
        </div>
        <button id="save-item">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
        <button id="delete-item" style="background: #f44336;">–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å</button>
    </section>

    <!-- –°–µ–∫—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞/–∏–º–ø–æ—Ä—Ç–∞ -->
    <section class="export-import-section">
        <h2>–≠–∫—Å–ø–æ—Ä—Ç –∏ –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h2>
        <p>–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —á–µ—Ä–µ–∑ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã –∏–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</p>

        <div class="controls">
            <button id="export-data">–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
            <button id="import-data">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
            <input type="file" id="import-file" accept=".json,application/json" class="hidden">
        </div>

        <div id="export-result" class="hidden">
            <h3>–î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏</h3>
            <div class="data-preview" id="export-preview"></div>

            <div class="share-buttons">
                <button class="share-button" id="copy-json">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z" fill="currentColor"/>
                    </svg>
                    –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                </button>

                <button class="share-button" id="share-as-file">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 16.08C17.24 16.08 16.56 16.38 16.04 16.85L8.91 12.7C8.96 12.47 9 12.24 9 12C9 11.76 8.96 11.53 8.91 11.3L15.96 7.19C16.5 7.69 17.21 8 18 8C19.66 8 21 6.66 21 5C21 3.34 19.66 2 18 2C16.34 2 15 3.34 15 5C15 5.24 15.04 5.47 15.09 5.7L8.04 9.81C7.5 9.31 6.79 9 6 9C4.34 9 3 10.34 3 12C3 13.66 4.34 15 6 15C6.79 15 7.5 14.69 8.04 14.19L15.16 18.35C15.11 18.56 15.08 18.78 15.08 19C15.08 20.61 16.39 21.92 18 21.92C19.61 21.92 20.92 20.61 20.92 19C20.92 17.39 19.61 16.08 18 16.08Z" fill="currentColor"/>
                    </svg>
                    –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
                </button>

                <button class="share-button" id="generate-qr-share">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 11H11V3H3V11ZM5 5H9V9H5V5Z" fill="currentColor"/>
                        <path d="M3 21H11V13H3V21ZM5 15H9V19H5V15Z" fill="currentColor"/>
                        <path d="M13 3V11H21V3H13ZM19 9H15V5H19V9Z" fill="currentColor"/>
                        <path d="M19 19H17V17H19V19Z" fill="currentColor"/>
                        <path d="M13 13H15V15H13V13Z" fill="currentColor"/>
                        <path d="M15 15H17V17H15V15Z" fill="currentColor"/>
                        <path d="M13 17H15V19H13V17Z" fill="currentColor"/>
                        <path d="M17 13H19V15H17V13Z" fill="currentColor"/>
                        <path d="M19 15H21V17H19V15Z" fill="currentColor"/>
                        <path d="M17 17H19V19H17V17Z" fill="currentColor"/>
                    </svg>
                    –ü–æ–∫–∞–∑–∞—Ç—å QR-–∫–æ–¥
                </button>
            </div>
        </div>

        <div id="import-result" class="hidden">
            <h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö</h3>
            <div class="data-preview" id="import-preview"></div>
            <p>–ù–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π: <span id="import-count">0</span></p>
            <div class="controls">
                <button id="confirm-import">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                <button id="cancel-import" style="background: #f44336;">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>

        <div id="qr-container" class="hidden" style="text-align: center; margin: 15px 0;">
            <canvas id="qr-canvas"></canvas>
            <p>–û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç QR-–∫–æ–¥ –Ω–∞ –¥—Ä—É–≥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ</p>
            <button id="close-qr">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </section>

    <script src="lib/jsQR.min.js"></script>
    <script src="lib/jsQRGen.js"></script>
    <script src="js/db.js"></script>
    <script src="js/scanner.js"></script>
    <script src="js/voice.js"></script>
    <script src="js/exportImport.js"></script>
    <script src="js/app.js"></script>
</body>
</html>